# API Response Guidelines

## Принципы вывода данных

При создании и редактировании сущностей в API **НЕ НУЖНО** возвращать все поля сущности. Вместо этого следует возвращать только те данные, которые действительно необходимы фронтенду для дальнейшей работы.

## Правила

### 1. Создание сущности (Create)
- Возвращать только `id` и `name` (или другие ключевые идентификаторы)
- Не загружать связанные данные (категории, файлы, etc.)
- Не возвращать все поля сущности

### 2. Обновление сущности (Update)
- Возвращать только `id` и `name` (или другие ключевые идентификаторы)
- Не загружать связанные данные повторно
- Не возвращать все поля сущности

### 3. Получение сущности (Get by ID)
- Возвращать полные данные с связанными сущностями
- Использовать `brandWithRelationsSchema` или аналогичные схемы

### 4. Список сущностей (List)
- Возвращать основные поля для отображения в списке
- Не загружать тяжелые связанные данные

## Примеры

### ❌ Неправильно (Create/Update)
```typescript
// Возвращает все поля и связанные данные
return {
  id: brand.id,
  name: brand.name,
  slug: brand.slug,
  description: brand.description,
  // ... все остальные поля
  categories: [...], // связанные данные
  files: [...], // связанные данные
};
```

### ✅ Правильно (Create/Update)
```typescript
// Возвращает только необходимые данные
return {
  id: brand.id,
  name: brand.name,
};
```

### ✅ Правильно (Get by ID)
```typescript
// Возвращает полные данные с связанными сущностями
return {
  id: brand.id,
  name: brand.name,
  // ... все поля
  categories: [...],
  files: [...],
};
```

## Схемы валидации

Создавайте отдельные схемы для разных типов ответов:

```typescript
// Для создания/обновления
export const createBrandResponseSchema = z.object({
  id: z.string(),
  name: z.string(),
});

// Для получения полных данных
export const brandWithRelationsSchema = z.object({
  id: z.string(),
  name: z.string(),
  // ... все поля
  categories: z.array(categorySchema).optional(),
  files: z.array(fileSchema).optional(),
});
```

## Преимущества

1. **Производительность** - меньше данных передается по сети
2. **Быстрота ответа** - нет лишних запросов к БД
3. **Читаемость** - фронтенд получает только нужные данные
4. **Масштабируемость** - легче поддерживать и расширять

## Применение

Этот подход должен применяться ко всем сущностям в проекте:
- Бренды (Brands)
- Категории (Categories)
- Продукты (Products)
- Заказы (Orders)
- Пользователи (Users)
- И другие сущности 